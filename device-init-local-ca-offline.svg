<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1703px" preserveAspectRatio="none" style="width:2152px;height:1703px;" version="1.1" viewBox="0 0 2152 1703" width="2152px" zoomAndPan="magnify"><defs><filter height="300%" id="f1woukbn208e4h" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1688.8672" style="stroke: #A80036; stroke-width: 1.0;" width="1067.5" x="1058" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1567.25" y="16.0669">Device</text><rect fill="#FFFFFF" filter="url(#f1woukbn208e4h)" height="244.1953" style="stroke: #000000; stroke-width: 2.0;" width="752.5" x="13" y="91.7266"/><rect fill="#FFFFFF" filter="url(#f1woukbn208e4h)" height="105.6641" style="stroke: #000000; stroke-width: 2.0;" width="989" x="161" y="349.9219"/><rect fill="#FFFFFF" filter="url(#f1woukbn208e4h)" height="1151.6875" style="stroke: #000000; stroke-width: 2.0;" width="1577" x="564.5" y="469.5859"/><rect fill="#FFFFFF" filter="url(#f1woukbn208e4h)" height="737.5625" style="stroke: #000000; stroke-width: 2.0;" width="1376" x="755.5" y="493.7188"/><rect fill="#FFFFFF" filter="url(#f1woukbn208e4h)" height="368.9922" style="stroke: #000000; stroke-width: 2.0;" width="1225.5" x="574.5" y="1245.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="211" y1="74.7266" y2="613.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="211" x2="211" y1="613.3828" y2="654.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="211" y1="654.1875" y2="1149.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="211" x2="211" y1="1149.6719" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="211" y1="1190.4766" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="211" x2="211" y1="1190.4766" y2="1231.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="211" y1="1231.2813" y2="1638.2734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="619.5" x2="619.5" y1="74.7266" y2="613.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="619.5" x2="619.5" y1="613.3828" y2="654.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="619.5" x2="619.5" y1="654.1875" y2="1149.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="619.5" x2="619.5" y1="1149.6719" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="619.5" x2="619.5" y1="1190.4766" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="619.5" x2="619.5" y1="1190.4766" y2="1231.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="619.5" x2="619.5" y1="1231.2813" y2="1638.2734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="709.5" x2="709.5" y1="74.7266" y2="613.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="709.5" x2="709.5" y1="613.3828" y2="654.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="709.5" x2="709.5" y1="654.1875" y2="1149.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="709.5" x2="709.5" y1="1149.6719" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="709.5" x2="709.5" y1="1190.4766" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="709.5" x2="709.5" y1="1190.4766" y2="1231.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="709.5" x2="709.5" y1="1231.2813" y2="1638.2734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847.5" x2="847.5" y1="74.7266" y2="613.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="847.5" x2="847.5" y1="613.3828" y2="654.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847.5" x2="847.5" y1="654.1875" y2="1149.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="847.5" x2="847.5" y1="1149.6719" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847.5" x2="847.5" y1="1190.4766" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="847.5" x2="847.5" y1="1190.4766" y2="1231.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847.5" x2="847.5" y1="1231.2813" y2="1638.2734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101" x2="1101" y1="74.7266" y2="613.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1101" x2="1101" y1="613.3828" y2="654.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101" x2="1101" y1="654.1875" y2="1149.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1101" x2="1101" y1="1149.6719" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101" x2="1101" y1="1190.4766" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1101" x2="1101" y1="1190.4766" y2="1231.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101" x2="1101" y1="1231.2813" y2="1638.2734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406" x2="1406" y1="74.7266" y2="613.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1406" x2="1406" y1="613.3828" y2="654.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406" x2="1406" y1="654.1875" y2="1149.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1406" x2="1406" y1="1149.6719" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406" x2="1406" y1="1190.4766" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1406" x2="1406" y1="1190.4766" y2="1231.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406" x2="1406" y1="1231.2813" y2="1638.2734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1750" y1="758.1016" y2="1149.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1750" x2="1750" y1="1149.6719" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1750" y1="1190.4766" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1750" x2="1750" y1="1190.4766" y2="1231.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1750" y1="1231.2813" y2="1638.2734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2084.5" x2="2084.5" y1="811.5469" y2="1149.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2084.5" x2="2084.5" y1="1149.6719" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2084.5" x2="2084.5" y1="1190.4766" y2="1190.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2084.5" x2="2084.5" y1="1190.4766" y2="1231.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2084.5" x2="2084.5" y1="1231.2813" y2="1638.2734"/><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="171" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="178" y="59.4248">Operator</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="171" y="1637.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="178" y="1657.2686">Operator</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="584.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="591.5" y="59.4248">IoT Hub</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="584.5" y="1637.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="591.5" y="1657.2686">IoT Hub</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="664.5" y="71.4248">Edge device</text><ellipse cx="710" cy="42.4297" fill="#FEFECE" filter="url(#f1woukbn208e4h)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="698" x2="722" y1="56.4297" y2="56.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="664.5" y="1650.2686">Edge device</text><ellipse cx="710" cy="1669.5703" fill="#FEFECE" filter="url(#f1woukbn208e4h)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="698" x2="722" y1="1683.5703" y2="1683.5703"/><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="765.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="818" y="43.1279">External</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="772.5" y="59.4248">Provisioning endpoint</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="765.5" y="1637.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="818" y="1657.2686">External</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="772.5" y="1673.5654">Provisioning endpoint</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="1062" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="1069" y="43.1279">IoT Edge</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="1072.5" y="59.4248">runtime</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="1062" y="1637.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="1069" y="1657.2686">IoT Edge</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="1072.5" y="1673.5654">runtime</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="1358" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1365" y="59.4248">EdgeAgent</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="1358" y="1637.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1365" y="1657.2686">EdgeAgent</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="1710" y="1637.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="1717" y="1657.2686">EdgeHub</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="2048.5" y="1637.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="2055.5" y="1657.2686">Custom</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="2058.5" y="1673.5654">Module</text><path d="M13,91.7266 L149,91.7266 L149,98.7266 L139,108.7266 L13,108.7266 L13,91.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="244.1953" style="stroke: #000000; stroke-width: 2.0;" width="752.5" x="13" y="91.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="28" y="104.7935">Initial Setup</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="211.5" x2="253.5" y1="145.125" y2="145.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="253.5" x2="253.5" y1="145.125" y2="158.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212.5" x2="253.5" y1="158.125" y2="158.125"/><polygon fill="#A80036" points="222.5,154.125,212.5,158.125,222.5,162.125,218.5,158.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="218.5" y="132.4927">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="381" x="231.5" y="124.9263">Generate device CA cert (DCAC) (self signed, or signed by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="231.5" y="140.0591">a topology CA Certificate (CA1) for gateway scenarios)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="211.5" x2="253.5" y1="202.3906" y2="202.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="253.5" x2="253.5" y1="202.3906" y2="215.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212.5" x2="253.5" y1="215.3906" y2="215.3906"/><polygon fill="#A80036" points="222.5,211.3906,212.5,215.3906,222.5,219.3906,218.5,215.3906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="218.5" y="189.7583">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="231.5" y="182.1919">Generate device identity cert (DIdC) signed by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="231.5" y="197.3247">Identity CA Cert (CA2).</text><path d="M23,228.3906 L23,268.3906 L396,268.3906 L396,238.3906 L386,228.3906 L23,228.3906 " fill="#FBFB77" filter="url(#f1woukbn208e4h)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M386,228.3906 L386,238.3906 L396,238.3906 L386,228.3906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="29" y="245.4575">CA1 and CA2 should be different</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="352" x="29" y="260.5903">because device does have the CA cert signed by CA1</text><polygon fill="#A80036" points="607.5,294.7891,617.5,298.7891,607.5,302.7891,611.5,298.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211.5" x2="613.5" y1="298.7891" y2="298.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="218.5" y="293.7231">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="368" x="230.5" y="293.7231">Configure identity CA Certificate (CA2) for CA based auth</text><polygon fill="#A80036" points="698,323.9219,708,327.9219,698,331.9219,702,327.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211.5" x2="704" y1="327.9219" y2="327.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="218.5" y="322.856">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="370" x="231.5" y="322.856">Install DCAC and DIdC on the device (file system or HSM)</text><path d="M161,349.9219 L443,349.9219 L443,356.9219 L433,366.9219 L161,366.9219 L161,349.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="105.6641" style="stroke: #000000; stroke-width: 2.0;" width="989" x="161" y="349.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="176" y="362.9888">Device setup and configuration</text><polygon fill="#A80036" points="1089,399.3203,1099,403.3203,1089,407.3203,1093,403.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211.5" x2="1095" y1="403.3203" y2="403.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="218.5" y="390.688">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="231.5" y="383.1216">Configure device CA (DCAC) in config.yaml (PKCS#11 URI or file path)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="231.5" y="398.2544">and provisioning in External Provisioning mode.</text><polygon fill="#A80036" points="1089,443.5859,1099,447.5859,1089,451.5859,1093,447.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211.5" x2="1095" y1="447.5859" y2="447.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="218.5" y="434.9536">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="611" x="231.5" y="427.3872">Configure deployment for device using local mode configuration for EA, EH and other modules.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="322" x="231.5" y="442.52">Configure EH Bridge to send telemetry upstream.</text><path d="M564.5,469.5859 L719.5,469.5859 L719.5,476.5859 L709.5,486.5859 L564.5,486.5859 L564.5,469.5859 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1151.6875" style="stroke: #000000; stroke-width: 2.0;" width="1577" x="564.5" y="469.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="579.5" y="482.6528">Device running</text><path d="M755.5,493.7188 L905.5,493.7188 L905.5,500.7188 L895.5,510.7188 L755.5,510.7188 L755.5,493.7188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="737.5625" style="stroke: #000000; stroke-width: 2.0;" width="1376" x="755.5" y="493.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="770.5" y="506.7856">Device Offline</text><polygon fill="#A80036" points="1089,527.9844,1099,531.9844,1089,535.9844,1093,531.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="848" x2="1095" y1="531.9844" y2="531.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="855" y="526.9185">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="868" y="526.9185">Start IoT Edge runtime</text><polygon fill="#A80036" points="859,572.25,849,576.25,859,580.25,855,576.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="853" x2="1100" y1="576.25" y2="576.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="865" y="563.6177">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="878" y="556.0513">Provision device</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="878" y="571.1841">(external provisioning endpoint)</text><polygon fill="#FF0000" points="1089,601.3828,1099,605.3828,1089,609.3828,1093,605.3828" style="stroke: #FF0000; stroke-width: 1.0;"/><line style="stroke: #FF0000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="848" x2="1095" y1="605.3828" y2="605.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="855" y="600.3169">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="868" y="600.3169">Failure</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="248" x="1024.25" y="637.5933">Provisioning attempts continue till success</text><polygon fill="#A80036" points="1394,671.3203,1404,675.3203,1394,679.3203,1398,675.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101" x2="1400" y1="675.3203" y2="675.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1108" y="670.2544">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="1131" y="670.2544">Create with local configuration and start</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406" x2="1448" y1="704.4531" y2="704.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1448" x2="1448" y1="704.4531" y2="717.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1407" x2="1448" y1="717.4531" y2="717.4531"/><polygon fill="#A80036" points="1417,713.4531,1407,717.4531,1417,721.4531,1413,717.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1413" y="699.3872">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1435" y="699.3872">Process deployment</text><polygon fill="#A80036" points="1698,742.5859,1708,746.5859,1698,750.5859,1702,746.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406" x2="1704" y1="746.5859" y2="746.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1413" y="741.52">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="1435" y="741.52">Create with local configuration and start</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="1710" y="725.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="1717" y="745.4482">EdgeHub</text><polygon fill="#A80036" points="2036.5,787.8828,2046.5,791.8828,2036.5,795.8828,2040.5,791.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406" x2="2042.5" y1="791.8828" y2="791.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1413" y="786.8169">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="1434" y="786.8169">Create and start</text><rect fill="#FEFECE" filter="url(#f1woukbn208e4h)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="2048.5" y="770.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="2055.5" y="790.7451">Custom</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="2058.5" y="807.042">Module</text><polygon fill="#A80036" points="1112,849.4766,1102,853.4766,1112,857.4766,1108,853.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1106" x2="1749" y1="853.4766" y2="853.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1118" y="848.4106">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="1140" y="848.4106">Get server cert</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101" x2="1143" y1="882.6094" y2="882.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1143" x2="1143" y1="882.6094" y2="895.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1102" x2="1143" y1="895.6094" y2="895.6094"/><polygon fill="#A80036" points="1112,891.6094,1102,895.6094,1112,899.6094,1108,895.6094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1108" y="877.5435">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="1130" y="877.5435">Generate server cert from DCAC</text><polygon fill="#A80036" points="1738,920.7422,1748,924.7422,1738,928.7422,1742,924.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1101" x2="1744" y1="924.7422" y2="924.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1108" y="919.6763">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1130" y="919.6763">Server cert</text><polygon fill="#A80036" points="1112,949.875,1102,953.875,1112,957.875,1108,953.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1106" x2="2084" y1="953.875" y2="953.875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1118" y="948.8091">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="1140" y="948.8091">Get local identity</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101" x2="1143" y1="983.0078" y2="983.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1143" x2="1143" y1="983.0078" y2="996.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1102" x2="1143" y1="996.0078" y2="996.0078"/><polygon fill="#A80036" points="1112,992.0078,1102,996.0078,1112,1000.0078,1108,996.0078" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1108" y="977.9419">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="1130" y="977.9419">Generate client cert from DCAC</text><polygon fill="#A80036" points="2073,1021.1406,2083,1025.1406,2073,1029.1406,2077,1025.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1101" x2="2079" y1="1025.1406" y2="1025.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1108" y="1020.0747">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="1130" y="1020.0747">Module local identity</text><polygon fill="#A80036" points="1761,1050.2734,1751,1054.2734,1761,1058.2734,1757,1054.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1755" x2="2084" y1="1054.2734" y2="1054.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1767" y="1049.2075">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="1790" y="1049.2075">Connect using mutual TLS auth</text><polygon fill="#A80036" points="1761,1079.4063,1751,1083.4063,1761,1087.4063,1757,1083.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1755" x2="2084" y1="1083.4063" y2="1083.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1767" y="1078.3403">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="1789" y="1078.3403">Pub/sub to MQTT Broker using custom topics</text><polygon fill="#A80036" points="1112,1108.5391,1102,1112.5391,1112,1116.5391,1108,1112.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1106" x2="1749" y1="1112.5391" y2="1112.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1118" y="1107.4731">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1140" y="1107.4731">Get IoTHub identity</text><polygon fill="#FF0000" points="1738,1137.6719,1748,1141.6719,1738,1145.6719,1742,1141.6719" style="stroke: #FF0000; stroke-width: 1.0;"/><line style="stroke: #FF0000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1101" x2="1744" y1="1141.6719" y2="1141.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1108" y="1136.606">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1129" y="1136.606">Failure</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="983.25" y="1173.8823">EdgeHub continues to ask for IoTHub identity periodically</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="343" x="976.75" y="1214.687">App operation continues. EdgeHub stores telemetry locally</text><path d="M574.5,1245.2813 L759.5,1245.2813 L759.5,1252.2813 L749.5,1262.2813 L574.5,1262.2813 L574.5,1245.2813 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="368.9922" style="stroke: #000000; stroke-width: 2.0;" width="1225.5" x="574.5" y="1245.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="589.5" y="1258.3481">Device goes online</text><polygon fill="#A80036" points="859,1294.6797,849,1298.6797,859,1302.6797,855,1298.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="853" x2="1100" y1="1298.6797" y2="1298.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="865" y="1286.0474">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="887" y="1278.481">Provision device</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="887" y="1293.6138">(external provisioning endpoint)</text><polygon fill="#A80036" points="630.5,1338.9453,620.5,1342.9453,630.5,1346.9453,626.5,1342.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="624.5" x2="847" y1="1342.9453" y2="1342.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="636.5" y="1330.313">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="658.5" y="1322.7466">Create device with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="658.5" y="1337.8794">CA based auth</text><polygon fill="#A80036" points="836,1368.0781,846,1372.0781,836,1376.0781,840,1372.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="619.5" x2="842" y1="1372.0781" y2="1372.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="626.5" y="1367.0122">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="648.5" y="1367.0122">Device info</text><polygon fill="#A80036" points="1089,1412.3438,1099,1416.3438,1089,1420.3438,1093,1416.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="848" x2="1095" y1="1416.3438" y2="1416.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="855" y="1403.7114">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="877" y="1396.145">Provisioning info</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="877" y="1411.2778">(IoTHub + deviceId + DIdC)</text><polygon fill="#A80036" points="630.5,1456.6094,620.5,1460.6094,630.5,1464.6094,626.5,1460.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="624.5" x2="1100" y1="1460.6094" y2="1460.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="636.5" y="1447.9771">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="658.5" y="1440.4106">Update credentials for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="658.5" y="1455.5435">EdgeAgent and EdgeHub with SAS auth</text><polygon fill="#A80036" points="1112,1485.7422,1102,1489.7422,1112,1493.7422,1108,1489.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1106" x2="1749" y1="1489.7422" y2="1489.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1118" y="1484.6763">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1140" y="1484.6763">Get IoTHub identity</text><polygon fill="#A80036" points="1738,1514.875,1748,1518.875,1738,1522.875,1742,1518.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1101" x2="1744" y1="1518.875" y2="1518.875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1108" y="1513.8091">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="435" x="1130" y="1513.8091">Identity info (IoTHub + deviceId + generation Id + credentials type)</text><polygon fill="#A80036" points="1112,1544.0078,1102,1548.0078,1112,1552.0078,1108,1548.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1106" x2="1749" y1="1548.0078" y2="1548.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1118" y="1542.9419">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="1139" y="1542.9419">Sign token</text><polygon fill="#A80036" points="1738,1573.1406,1748,1577.1406,1738,1581.1406,1742,1577.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1101" x2="1744" y1="1577.1406" y2="1577.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1108" y="1572.0747">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="1129" y="1572.0747">Token signed with EdgeHub's SAS Key</text><polygon fill="#A80036" points="630.5,1602.2734,620.5,1606.2734,630.5,1610.2734,626.5,1606.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="624.5" x2="1749" y1="1606.2734" y2="1606.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="636.5" y="1601.2075">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="656.5" y="1601.2075">Connect using token and forward telemetry</text><!--MD5=[850b8ceb2ba1f992b44c6e6cc7a3d773]
@startuml
participant "Operator" as oem
participant "IoT Hub" as ih
entity "Edge device" as device
participant "External\nProvisioning endpoint" as ae

box "Device" #LightBlue 
participant "IoT Edge\nruntime" as ie
participant "EdgeAgent" as ea
participant "EdgeHub" as eh
participant "Custom\nModule" as cm
end box 

autonumber 
group Initial Setup 
oem->oem : Generate device CA cert (DCAC) (self signed, or signed by\na topology CA Certificate (CA1) for gateway scenarios)
oem->oem : Generate device identity cert (DIdC) signed by\nIdentity CA Cert (CA2).
note over oem: CA1 and CA2 should be different\nbecause device does have the CA cert signed by CA1
oem->ih : Configure identity CA Certificate (CA2) for CA based auth 
oem->device : Install DCAC and DIdC on the device (file system or HSM) 
end 

group Device setup and configuration
oem->ie : Configure device CA (DCAC) in config.yaml (PKCS#11 URI or file path)\nand provisioning in External Provisioning mode. 
oem->ie : Configure deployment for device using local mode configuration for EA, EH and other modules.\nConfigure EH Bridge to send telemetry upstream.
end 

group Device running
group Device Offline

ae -> ie : Start IoT Edge runtime

ie -> ae : Provision device\n(external provisioning endpoint)
ae -[#red]-> ie : Failure
... Provisioning attempts continue till success ... 

ie -> ea ** : Create with local configuration and start
ea -> ea : Process deployment

ea -> eh ** : Create with local configuration and start
ea -> cm ** : Create and start

eh -> ie : Get server cert
ie -> ie : Generate server cert from DCAC
ie - -> eh: Server cert

cm -> ie : Get local identity
ie -> ie : Generate client cert from DCAC
ie - -> cm: Module local identity

cm -> eh : Connect using mutual TLS auth
cm -> eh : Pub/sub to MQTT Broker using custom topics

eh -> ie : Get IoTHub identity
ie -[#red]-> eh : Failure
... EdgeHub continues to ask for IoTHub identity periodically ... 

... App operation continues. EdgeHub stores telemetry locally ... 
end 

group Device goes online
ie -> ae : Provision device\n(external provisioning endpoint)
ae -> ih : Create device with\nCA based auth
return Device info
ae - -> ie: Provisioning info\n(IoTHub + deviceId + DIdC)

ie -> ih : Update credentials for\nEdgeAgent and EdgeHub with SAS auth

eh -> ie : Get IoTHub identity
return Identity info (IoTHub + deviceId + generation Id + credentials type)
eh -> ie : Sign token 
return Token signed with EdgeHub's SAS Key
eh -> ih : Connect using token and forward telemetry
end
end
@enduml

PlantUML version 1.2020.08beta10(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14.0.1+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>